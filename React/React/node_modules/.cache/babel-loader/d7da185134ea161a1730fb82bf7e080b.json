{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\src\\\\components\\\\trainee-details.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport CryptoJS from \"react-native-crypto-js\";\nimport { codes } from \"../secrets/secrets.js\";\nimport { CSVLink } from \"react-csv\";\nimport AccessDenied from './modules/AccessDenied';\nimport { authService } from './modules/authService';\nimport moment from 'moment';\nimport '../css/trainee-details.css';\n\nvar TraineeDetails =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(TraineeDetails, _Component);\n\n  function TraineeDetails(props) {\n    var _this;\n\n    _classCallCheck(this, TraineeDetails);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(TraineeDetails).call(this, props));\n    _this.state = {\n      id: '',\n      trainee_fname: '',\n      trainee_lname: '',\n      trainee_email: '',\n      trainee_bank_name: '',\n      trainee_account_no: '',\n      trainee_sort_code: '',\n      trainee_approved: false,\n      currentUser: authService.currentUserValue,\n      trainee_start_date: '',\n      trainee_end_date: '',\n      csv: []\n    };\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(TraineeDetails, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/' + this.props.match.params.id).then(function (response) {\n        console.log(Date(response.data.trainee_end_date));\n\n        if (response.data.trainee_account_no != null && response.data.trainee_sort_code != null) {\n          var trainee_account_no = CryptoJS.AES.decrypt(response.data.trainee_account_no, codes.trainee).toString(CryptoJS.enc.Utf8);\n          var trainee_sort_code = CryptoJS.AES.decrypt(response.data.trainee_sort_code, codes.trainee).toString(CryptoJS.enc.Utf8);\n          var trainee_bank_name = CryptoJS.AES.decrypt(response.data.trainee_bank_name, codes.trainee).toString(CryptoJS.enc.Utf8);\n\n          _this2.setState({\n            trainee_account_no: trainee_account_no,\n            trainee_sort_code: trainee_sort_code,\n            trainee_bank_name: trainee_bank_name\n          });\n        }\n\n        var trainee_fname = CryptoJS.AES.decrypt(response.data.trainee_fname, codes.trainee).toString(CryptoJS.enc.Utf8);\n        var trainee_lname = CryptoJS.AES.decrypt(response.data.trainee_lname, codes.trainee).toString(CryptoJS.enc.Utf8);\n        var trainee_email = CryptoJS.AES.decrypt(response.data.trainee_email, codes.staff, {\n          iv: codes.iv\n        }).toString(CryptoJS.enc.Utf8);\n        var trainee_start_date = CryptoJS.AES.decrypt(response.data.trainee_start_date, codes.trainee).toString(CryptoJS.enc.Utf8);\n        var trainee_end_date = CryptoJS.AES.decrypt(response.data.trainee_end_date, codes.trainee).toString(CryptoJS.enc.Utf8);\n\n        _this2.setState({\n          trainee_fname: trainee_fname,\n          trainee_lname: trainee_lname,\n          trainee_email: trainee_email,\n          trainee_start_date: trainee_start_date,\n          trainee_end_date: trainee_end_date,\n          csv: [[\"Trainee/Payee Name\", \"Account Number\", \"Sort Code\", \"Total Value\", \"DecimalPlace\", \"Append\", \"Data to Copy to Notepad\"], [trainee_fname + \" \" + trainee_lname, trainee_account_no, trainee_sort_code, \"0.00\", \"2\", \"000\", trainee_sort_code + ',' + trainee_fname + ' ' + trainee_lname + ',' + trainee_account_no + ',' + \"0\" + \".00\" + ',' + \"BURSARY\" + ',' + \"99\"]]\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      this.props.history.push('/edit/' + this.props.match.params.id);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.currentUser.token.role === 'finance') {\n        return React.createElement(\"div\", {\n          className: \"details\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          onSubmit: this.onSubmit,\n          className: \"table table-striped-details\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 77\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, \"Trainee Details\"), React.createElement(\"tbody\", {\n          id: \"detailstbody\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, \"First Name\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, this.state.trainee_fname)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"Last Name\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, this.state.trainee_lname)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Email\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, this.state.trainee_email)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"Start Date\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, moment(this.state.trainee_start_date).format('MMMM Do YYYY'))), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"End Date\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, moment(this.state.trainee_end_date).format('MMMM Do YYYY'))), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, \"Bank Name\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85\n          },\n          __self: this\n        }, this.state.trainee_bank_name)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, \"Account Number\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, this.state.trainee_account_no)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, \"Sort Code\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, this.state.trainee_sort_code)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(CSVLink, {\n          data: this.state.csv,\n          filename: \"trainee-details.csv\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, \"Download CSV \"))))));\n      } else if (this.state.currentUser.token._id === this.props.match.params.id) {\n        return React.createElement(\"div\", {\n          className: \"details\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          onSubmit: this.onSubmit,\n          className: \"table table-striped-details\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Trainee Details\"), React.createElement(\"tbody\", {\n          id: \"detailstbody\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, \"First Name\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, this.state.trainee_fname)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, \"Last Name\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, this.state.trainee_lname)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, \"Email\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, this.state.trainee_email)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, \"Start Date\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, moment(this.state.trainee_start_date).format('MMMM Do YYYY'))), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, \"End Date\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, moment(this.state.trainee_end_date).format('MMMM Do YYYY'))), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"Bank Name\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, this.state.trainee_bank_name)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"Account Number\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, this.state.trainee_account_no)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, \"Sort Code\"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        }, this.state.trainee_sort_code)), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"Edit\",\n          className: \"btn btn-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        })))))));\n      } else {\n        return React.createElement(AccessDenied, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return TraineeDetails;\n}(Component);\n\nexport { TraineeDetails as default };","map":{"version":3,"sources":["C:\\Users\\Chi Zhang\\Desktop\\QA Bursary project\\AWS-Bursary-Project-V1\\React\\src\\components\\trainee-details.component.js"],"names":["React","Component","axios","CryptoJS","codes","CSVLink","AccessDenied","authService","moment","TraineeDetails","props","state","id","trainee_fname","trainee_lname","trainee_email","trainee_bank_name","trainee_account_no","trainee_sort_code","trainee_approved","currentUser","currentUserValue","trainee_start_date","trainee_end_date","csv","onSubmit","bind","get","process","env","REACT_APP_AWS_IP","match","params","then","response","console","log","Date","data","AES","decrypt","trainee","toString","enc","Utf8","setState","staff","iv","catch","error","e","history","push","token","role","format","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport CryptoJS from \"react-native-crypto-js\";\r\nimport { codes } from \"../secrets/secrets.js\";\r\nimport { CSVLink } from \"react-csv\";\r\nimport AccessDenied from './modules/AccessDenied';\r\nimport { authService } from './modules/authService';\r\nimport moment from 'moment';\r\nimport '../css/trainee-details.css';\r\n\r\n\r\nexport default class TraineeDetails extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n\t\t\tid: '',\r\n\t\t\ttrainee_fname: '',\r\n            trainee_lname: '',\r\n            trainee_email: '',\r\n\t\t\ttrainee_bank_name: '', \r\n            trainee_account_no: '',\r\n            trainee_sort_code: '',\r\n            trainee_approved: false,\r\n\t\t\tcurrentUser: authService.currentUserValue,\r\n            trainee_start_date: '',\r\n            trainee_end_date: '',\r\n            csv: []\r\n        }\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        axios.get('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/'+this.props.match.params.id)\r\n            .then(response => {\r\n                console.log(Date(response.data.trainee_end_date));\r\n                if(response.data.trainee_account_no != null && response.data.trainee_sort_code != null){\r\n                    var trainee_account_no = CryptoJS.AES.decrypt(response.data.trainee_account_no, codes.trainee).toString(CryptoJS.enc.Utf8);\r\n                    var trainee_sort_code = CryptoJS.AES.decrypt(response.data.trainee_sort_code, codes.trainee).toString(CryptoJS.enc.Utf8);\r\n                    var trainee_bank_name = CryptoJS.AES.decrypt(response.data.trainee_bank_name, codes.trainee).toString(CryptoJS.enc.Utf8);\r\n\t\t\t\t\tthis.setState({\r\n                        trainee_account_no: trainee_account_no,\r\n                        trainee_sort_code: trainee_sort_code,\r\n\t\t\t\t\t\ttrainee_bank_name: trainee_bank_name,\r\n                    }) \r\n                }\r\n                var trainee_fname  = CryptoJS.AES.decrypt(response.data.trainee_fname, codes.trainee).toString(CryptoJS.enc.Utf8);\r\n                var trainee_lname  = CryptoJS.AES.decrypt(response.data.trainee_lname, codes.trainee).toString(CryptoJS.enc.Utf8);\r\n                var trainee_email  = CryptoJS.AES.decrypt(response.data.trainee_email, codes.staff, {iv: codes.iv}).toString(CryptoJS.enc.Utf8);\r\n                var trainee_start_date = CryptoJS.AES.decrypt(response.data.trainee_start_date, codes.trainee).toString(CryptoJS.enc.Utf8);\r\n                var trainee_end_date = CryptoJS.AES.decrypt(response.data.trainee_end_date, codes.trainee).toString(CryptoJS.enc.Utf8);\r\n                this.setState({\r\n                    trainee_fname: trainee_fname,\r\n                    trainee_lname: trainee_lname,\r\n                    trainee_email: trainee_email,\r\n                    trainee_start_date: trainee_start_date,\r\n                    trainee_end_date: trainee_end_date,\r\n                    csv: [[\"Trainee/Payee Name\", \"Account Number\", \"Sort Code\", \"Total Value\", \"DecimalPlace\", \"Append\", \"Data to Copy to Notepad\"],[trainee_fname +\" \"+ trainee_lname, trainee_account_no, trainee_sort_code, \"0.00\", \"2\",\"000\",trainee_sort_code+','+trainee_fname+' '+trainee_lname+','+trainee_account_no+','+\"0\"+\".00\"+','+\"BURSARY\"+','+\"99\"]]\r\n                }) \r\n                \r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n    }\r\n\r\n    onSubmit(e) {\r\n        \r\n        this.props.history.push('/edit/'+this.props.match.params.id);\r\n    }\r\n\r\nrender() {\r\n\r\n\tif(this.state.currentUser.token.role === 'finance') {\r\n        return (\r\n            <div className=\"details\">\r\n                <table onSubmit={this.onSubmit} className=\"table table-striped-details\">\r\n                <h3>Trainee Details</h3>\r\n                    <tbody id=\"detailstbody\">\r\n                            <tr><th>First Name</th><td>{this.state.trainee_fname}</td></tr>\r\n                            <tr><th>Last Name</th><td>{this.state.trainee_lname}</td></tr>\r\n                            <tr><th>Email</th><td>{this.state.trainee_email}</td></tr>\r\n                            <tr><th>Start Date</th><td>{moment(this.state.trainee_start_date).format('MMMM Do YYYY')}</td></tr>\r\n                            <tr><th>End Date</th><td>{moment(this.state.trainee_end_date).format('MMMM Do YYYY')}</td></tr>\r\n\t\t\t\t\t\t\t<tr><th>Bank Name</th><td>{this.state.trainee_bank_name}</td></tr>\r\n                            <tr><th>Account Number</th><td>{this.state.trainee_account_no}</td></tr>\r\n                            <tr><th>Sort Code</th><td>{this.state.trainee_sort_code}</td></tr>\r\n                            <tr>\r\n                       \r\n                            <td>\r\n                                <CSVLink data={this.state.csv} filename='trainee-details.csv'>Download CSV </CSVLink>\r\n                            </td>\r\n                            </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\r\n        )\r\n\t} else if(this.state.currentUser.token._id === this.props.match.params.id) {\r\n\t\treturn (\r\n\t\t<div className=\"details\">\r\n                <table onSubmit={this.onSubmit} className=\"table table-striped-details\">\r\n\t\t\t\t<h3>Trainee Details</h3>\r\n                    <tbody id=\"detailstbody\">\r\n                            <tr><th>First Name</th><td>{this.state.trainee_fname}</td></tr>\r\n                            <tr><th>Last Name</th><td>{this.state.trainee_lname}</td></tr>\r\n                            <tr><th>Email</th><td>{this.state.trainee_email}</td></tr>\r\n\t\t\t\t\t\t\t<tr><th>Start Date</th><td>{moment(this.state.trainee_start_date).format('MMMM Do YYYY')}</td></tr>\r\n                            <tr><th>End Date</th><td>{moment(this.state.trainee_end_date).format('MMMM Do YYYY')}</td></tr>\r\n\t\t\t\t\t\t\t<tr><th>Bank Name</th><td>{this.state.trainee_bank_name}</td></tr>\r\n                            <tr><th>Account Number</th><td>{this.state.trainee_account_no}</td></tr>\r\n                            <tr><th>Sort Code</th><td>{this.state.trainee_sort_code}</td></tr>\r\n                            <tr>\r\n                        \r\n                            <td>\r\n                                <form><input type=\"submit\" value=\"Edit\" className=\"btn btn-primary\" /></form>\r\n                            </td>\r\n                            </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n\t\t);\r\n\t}else{ \r\n\treturn(\r\n\t\t< AccessDenied />\r\n\t);}\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}