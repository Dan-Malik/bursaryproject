{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\src\\\\components\\\\create-trainee.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport CryptoJS from \"react-native-crypto-js\";\nimport { codes } from \"../secrets/secrets.js\";\nimport AccessDenied from './modules/AccessDenied';\nimport { authService } from './modules/authService';\nimport moment from 'moment';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport '@y0c/react-datepicker/assets/styles/calendar.scss';\nimport '../css/add-trainee.css';\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\nimport 'react-day-picker/lib/style.css';\nimport MomentLocaleUtils, { formatDate } from 'react-day-picker/moment';\n\nvar CreateTrainee =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateTrainee, _Component);\n\n  function CreateTrainee(props) {\n    var _this;\n\n    _classCallCheck(this, CreateTrainee);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateTrainee).call(this, props));\n\n    _this.onChangeStartDate = function (startDate) {\n      _this.setState({\n        trainee_start_date: startDate\n      });\n\n      console.log(startDate);\n      console.log(_this.state.trainee_start_date);\n    };\n\n    _this.onChangeEndDate = function (endDate) {\n      _this.setState({\n        trainee_end_date: endDate\n      });\n\n      console.log(_this.state.endDate);\n    };\n\n    _this.onChangeTraineeFname = _this.onChangeTraineeFname.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeTraineeLname = _this.onChangeTraineeLname.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeTraineeEmail = _this.onChangeTraineeEmail.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeTraineePassword = _this.onChangeTraineePassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeStartDate = _this.onChangeStartDate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeEndDate = _this.onChangeEndDate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onClickBursary = _this.onClickBursary.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      trainee_fname: '',\n      trainee_lname: '',\n      trainee_email: '',\n      trainee_password: '',\n      trainee_start_date: '',\n      trainee_end_date: '',\n      currentUser: authService.currentUserValue,\n      recruiterEmail: '',\n      bursary: 'False'\n    };\n    return _this;\n  }\n\n  _createClass(CreateTrainee, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('http://' + process.env.REACT_APP_AWS_IP + ':4000/admin/staff/' + this.state.currentUser.token._id).then(function (response) {\n        if (response.data == null) {\n          authService.logout();\n\n          if (!authService.currentUserValue) {\n            document.location.href = 'http://' + process.env.REACT_APP_AWS_IP + ':3000/login';\n          }\n        } else {\n          var email = CryptoJS.AES.decrypt(response.data.email, codes.staff, {\n            iv: codes.iv\n          }).toString(CryptoJS.enc.Utf8);\n\n          _this2.setState({\n            recruiterEmail: email\n          });\n        }\n      });\n    }\n  }, {\n    key: \"onChangeTraineeFname\",\n    value: function onChangeTraineeFname(e) {\n      this.setState({\n        trainee_fname: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeTraineeLname\",\n    value: function onChangeTraineeLname(e) {\n      this.setState({\n        trainee_lname: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeTraineeEmail\",\n    value: function onChangeTraineeEmail(e) {\n      this.setState({\n        trainee_email: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeTraineePassword\",\n    value: function onChangeTraineePassword(e) {\n      this.setState({\n        trainee_password: e.target.value\n      });\n    }\n  }, {\n    key: \"onClickBursary\",\n    value: function onClickBursary(e) {\n      if (document.getElementById(\"bursaryValue\").checked) {\n        this.setState({\n          bursary: \"True\"\n        });\n      } else {\n        this.setState({\n          bursary: \"False\"\n        });\n      }\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this3 = this;\n\n      e.preventDefault();\n\n      if (this.state.trainee_start_date === '' || this.state.trainee_end_date === '') {\n        alert('Please select the bursary start/end dates');\n      } else if (moment(this.state.trainee_end_date).isBefore(this.state.trainee_start_date)) {\n        alert('The end date is before the start date, please resolve this before creating the trainee');\n      } else {\n        console.log(\"Form submitted:\");\n        console.log(\"Trainee Fname: \".concat(this.state.trainee_fname));\n        console.log(\"Trainee Lname: \".concat(this.state.trainee_lname));\n        console.log(\"Trainee Email: \".concat(this.state.trainee_email));\n        console.log(this.state.bursary);\n        var fname = CryptoJS.AES.encrypt(this.state.trainee_fname, codes.trainee);\n        var lname = CryptoJS.AES.encrypt(this.state.trainee_lname, codes.trainee);\n        var email = CryptoJS.AES.encrypt(this.state.trainee_email, codes.staff, {\n          iv: codes.iv\n        });\n        var pass = CryptoJS.AES.encrypt(Math.random().toString(36).slice(-8), codes.trainee);\n        var startDate = CryptoJS.AES.encrypt(this.state.trainee_start_date.toString(), codes.trainee);\n        var endDate = CryptoJS.AES.encrypt(this.state.trainee_end_date.toString(), codes.trainee);\n        var recruiterEmail = CryptoJS.AES.encrypt(this.state.recruiterEmail, codes.trainee);\n        var setStatus = CryptoJS.AES.encrypt('Incomplete', codes.trainee);\n        var setBursary = CryptoJS.AES.encrypt(this.state.bursary, codes.trainee);\n        var newTrainee = {\n          trainee_fname: fname.toString(),\n          trainee_lname: lname.toString(),\n          trainee_email: email.toString(),\n          trainee_password: pass.toString(),\n          trainee_start_date: startDate.toString(),\n          trainee_end_date: endDate.toString(),\n          added_By: recruiterEmail.toString(),\n          status: setStatus.toString(),\n          bursary: setBursary.toString()\n        };\n        console.log(newTrainee);\n        axios.post('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/add', newTrainee).then(function (response) {\n          if (response.status == 205) {\n            alert(\"Email is already in use\");\n          } else {\n            axios.post('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/send-email', {\n              trainee_email: email.toString()\n            }).then(function (response) {\n              console.log(response.data);\n\n              _this3.props.history.push('/');\n\n              window.location.reload();\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.currentUser.token.role !== 'recruiter') {\n        return React.createElement(AccessDenied, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"div\", {\n          className: \"createTrainee\",\n          style: {\n            marginLeft: 100,\n            marginRight: 100\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 184\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          className: \"addForm\",\n          onSubmit: this.onSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 185\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, \"Add Trainee\"), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }, \"First Name: \"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: this.state.trainee_fname,\n          onChange: this.onChangeTraineeFname,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }, \"Last Name: \"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: this.state.trainee_lname,\n          onChange: this.onChangeTraineeLname,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 203\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 204\n          },\n          __self: this\n        }, \"Email: \"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: this.state.trainee_email,\n          onChange: this.onChangeTraineeEmail,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 213\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 214\n          },\n          __self: this\n        }, \" Bursary: \"), React.createElement(\"input\", {\n          type: \"checkbox\",\n          id: \"bursaryValue\",\n          onClick: this.onClickBursary,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 218\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219\n          },\n          __self: this\n        }, \" Bursary Start Date\"), React.createElement(\"div\", {\n          style: {\n            height: '50px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, React.createElement(DayPickerInput, {\n          placeholder: \"DD/MM/YYYY\",\n          format: \"DD/MM/YYYY\",\n          formatDate: formatDate,\n          value: this.state.trainee_start_date,\n          onDayChange: this.onChangeStartDate,\n          dayPickerProps: {\n            selectedDays: this.state.trainee_start_date,\n            disabledDays: {\n              daysOfWeek: [0, 6]\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        })), React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235\n          },\n          __self: this\n        }, \" Bursary End Date \"), React.createElement(\"div\", {\n          style: {\n            height: '50px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 236\n          },\n          __self: this\n        }, React.createElement(DayPickerInput, {\n          placeholder: \"DD/MM/YYYY\",\n          format: \"DD/MM/YYYY\",\n          formatDate: formatDate,\n          value: this.state.trainee_end_date,\n          onDayChange: this.onChangeEndDate,\n          dayPickerProps: {\n            selectedDays: this.state.trainee_end_date,\n            disabledDays: {\n              daysOfWeek: [0, 6]\n            }\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 237\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 253\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"Add Trainee\",\n          className: \"btn btn-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 254\n          },\n          __self: this\n        }))));\n      }\n    }\n  }]);\n\n  return CreateTrainee;\n}(Component);\n\nexport { CreateTrainee as default };","map":{"version":3,"sources":["C:\\Users\\Chi Zhang\\Desktop\\QA Bursary project\\AWS-Bursary-Project-V1\\React\\src\\components\\create-trainee.component.js"],"names":["React","Component","axios","CryptoJS","codes","AccessDenied","authService","moment","DayPickerInput","MomentLocaleUtils","formatDate","CreateTrainee","props","onChangeStartDate","startDate","setState","trainee_start_date","console","log","state","onChangeEndDate","endDate","trainee_end_date","onChangeTraineeFname","bind","onChangeTraineeLname","onChangeTraineeEmail","onChangeTraineePassword","onSubmit","onClickBursary","trainee_fname","trainee_lname","trainee_email","trainee_password","currentUser","currentUserValue","recruiterEmail","bursary","get","process","env","REACT_APP_AWS_IP","token","_id","then","response","data","logout","document","location","href","email","AES","decrypt","staff","iv","toString","enc","Utf8","e","target","value","getElementById","checked","preventDefault","alert","isBefore","fname","encrypt","trainee","lname","pass","Math","random","slice","setStatus","setBursary","newTrainee","added_By","status","post","history","push","window","reload","role","marginLeft","marginRight","height","selectedDays","disabledDays","daysOfWeek"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,wBAArB;AACA,SAASC,KAAT,QAAsB,uBAAtB;AACA,OAAOC,YAAP,MAAyB,wBAAzB;AACA,SAASC,WAAT,QAA4B,uBAA5B;AACA,OAAOC,MAAP,MAAmB,QAAnB;AAEA,OAAO,kCAAP;AACA,OAAO,4CAAP;AACA,OAAO,mDAAP;AACA,OAAO,wBAAP;AAEA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,OAAO,gCAAP;AACA,OAAOC,iBAAP,IACIC,UADJ,QAES,yBAFT;;IAIqBC,a;;;;;AAEjB,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,uFAAMA,KAAN;;AADe,UAqEnBC,iBArEmB,GAqEC,UAACC,SAAD,EAAc;AAC9B,YAAKC,QAAL,CAAc;AACVC,QAAAA,kBAAkB,EAAEF;AADV,OAAd;;AAIAG,MAAAA,OAAO,CAACC,GAAR,CAAYJ,SAAZ;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWH,kBAAvB;AACH,KA5EkB;;AAAA,UA8EnBI,eA9EmB,GA8ED,UAACC,OAAD,EAAY;AAC1B,YAAKN,QAAL,CAAc;AACVO,QAAAA,gBAAgB,EAAED;AADR,OAAd;;AAGAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAKC,KAAL,CAAWE,OAAvB;AACH,KAnFkB;;AAGf,UAAKE,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BC,IAA1B,uDAA5B;AACA,UAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BD,IAA1B,uDAA5B;AACA,UAAKE,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BF,IAA1B,uDAA5B;AACA,UAAKG,uBAAL,GAA+B,MAAKA,uBAAL,CAA6BH,IAA7B,uDAA/B;AACA,UAAKI,QAAL,GAAgB,MAAKA,QAAL,CAAcJ,IAAd,uDAAhB;AACA,UAAKX,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBW,IAAvB,uDAAzB;AACA,UAAKJ,eAAL,GAAuB,MAAKA,eAAL,CAAqBI,IAArB,uDAAvB;AACA,UAAKK,cAAL,GAAsB,MAAKA,cAAL,CAAoBL,IAApB,uDAAtB;AAEA,UAAKL,KAAL,GAAa;AACTW,MAAAA,aAAa,EAAE,EADN;AAETC,MAAAA,aAAa,EAAE,EAFN;AAGTC,MAAAA,aAAa,EAAE,EAHN;AAITC,MAAAA,gBAAgB,EAAE,EAJT;AAKTjB,MAAAA,kBAAkB,EAAE,EALX;AAMTM,MAAAA,gBAAgB,EAAE,EANT;AAOTY,MAAAA,WAAW,EAAE5B,WAAW,CAAC6B,gBAPhB;AAQTC,MAAAA,cAAc,EAAE,EARP;AASTC,MAAAA,OAAO,EAAE;AATA,KAAb;AAZe;AAuBlB;;;;wCAEkB;AAAA;;AACfnC,MAAAA,KAAK,CAACoC,GAAN,CAAU,YAAYC,OAAO,CAACC,GAAR,CAAYC,gBAAxB,GAA2C,oBAA3C,GAAkE,KAAKtB,KAAL,CAAWe,WAAX,CAAuBQ,KAAvB,CAA6BC,GAAzG,EACCC,IADD,CACM,UAAAC,QAAQ,EAAI;AAChB,YAAGA,QAAQ,CAACC,IAAT,IAAiB,IAApB,EAAyB;AACvBxC,UAAAA,WAAW,CAACyC,MAAZ;;AACA,cAAI,CAACzC,WAAW,CAAC6B,gBAAjB,EAAmC;AACjCa,YAAAA,QAAQ,CAACC,QAAT,CAAkBC,IAAlB,GAAyB,YAAYX,OAAO,CAACC,GAAR,CAAYC,gBAAxB,GAA2C,aAApE;AACD;AACF,SALD,MAMI;AACF,cAAIU,KAAK,GAAGhD,QAAQ,CAACiD,GAAT,CAAaC,OAAb,CAAqBR,QAAQ,CAACC,IAAT,CAAcK,KAAnC,EAA0C/C,KAAK,CAACkD,KAAhD,EAAuD;AAAEC,YAAAA,EAAE,EAAEnD,KAAK,CAACmD;AAAZ,WAAvD,EAAyEC,QAAzE,CAAkFrD,QAAQ,CAACsD,GAAT,CAAaC,IAA/F,CAAZ;;AAEA,UAAA,MAAI,CAAC3C,QAAL,CAAc;AACZqB,YAAAA,cAAc,EAAEe;AADJ,WAAd;AAGD;AACF,OAfD;AAgBH;;;yCAEoBQ,C,EAAG;AACpB,WAAK5C,QAAL,CAAc;AACVe,QAAAA,aAAa,EAAE6B,CAAC,CAACC,MAAF,CAASC;AADd,OAAd;AAGH;;;yCAEoBF,C,EAAG;AACpB,WAAK5C,QAAL,CAAc;AACVgB,QAAAA,aAAa,EAAE4B,CAAC,CAACC,MAAF,CAASC;AADd,OAAd;AAGH;;;yCAGoBF,C,EAAG;AACpB,WAAK5C,QAAL,CAAc;AACViB,QAAAA,aAAa,EAAE2B,CAAC,CAACC,MAAF,CAASC;AADd,OAAd;AAGH;;;4CAEuBF,C,EAAG;AACvB,WAAK5C,QAAL,CAAc;AACVkB,QAAAA,gBAAgB,EAAE0B,CAAC,CAACC,MAAF,CAASC;AADjB,OAAd;AAGH;;;mCAkBcF,C,EAAG;AACd,UAAGX,QAAQ,CAACc,cAAT,CAAwB,cAAxB,EAAwCC,OAA3C,EAAmD;AAC/C,aAAKhD,QAAL,CAAc;AACVsB,UAAAA,OAAO,EAAE;AADC,SAAd;AAGH,OAJD,MAKI;AACA,aAAKtB,QAAL,CAAc;AACVsB,UAAAA,OAAO,EAAE;AADC,SAAd;AAGH;AACJ;;;6BAEQsB,C,EAAG;AAAA;;AACRA,MAAAA,CAAC,CAACK,cAAF;;AAEA,UAAG,KAAK7C,KAAL,CAAWH,kBAAX,KAAkC,EAAlC,IAAwC,KAAKG,KAAL,CAAWG,gBAAX,KAAgC,EAA3E,EAA8E;AAC1E2C,QAAAA,KAAK,CAAC,2CAAD,CAAL;AACH,OAFD,MAGK,IAAG1D,MAAM,CAAC,KAAKY,KAAL,CAAWG,gBAAZ,CAAN,CAAoC4C,QAApC,CAA6C,KAAK/C,KAAL,CAAWH,kBAAxD,CAAH,EAA+E;AAChFiD,QAAAA,KAAK,CAAC,wFAAD,CAAL;AACH,OAFI,MAGD;AACAhD,QAAAA,OAAO,CAACC,GAAR;AACAD,QAAAA,OAAO,CAACC,GAAR,0BAA8B,KAAKC,KAAL,CAAWW,aAAzC;AACAb,QAAAA,OAAO,CAACC,GAAR,0BAA8B,KAAKC,KAAL,CAAWY,aAAzC;AACAd,QAAAA,OAAO,CAACC,GAAR,0BAA8B,KAAKC,KAAL,CAAWa,aAAzC;AACAf,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWkB,OAAvB;AAEA,YAAI8B,KAAK,GAAGhE,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqB,KAAKjD,KAAL,CAAWW,aAAhC,EAA+C1B,KAAK,CAACiE,OAArD,CAAZ;AACA,YAAIC,KAAK,GAAGnE,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqB,KAAKjD,KAAL,CAAWY,aAAhC,EAA+C3B,KAAK,CAACiE,OAArD,CAAZ;AACA,YAAIlB,KAAK,GAAGhD,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqB,KAAKjD,KAAL,CAAWa,aAAhC,EAA+C5B,KAAK,CAACkD,KAArD,EAA4D;AAACC,UAAAA,EAAE,EAAEnD,KAAK,CAACmD;AAAX,SAA5D,CAAZ;AACA,YAAIgB,IAAI,GAAIpE,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqBI,IAAI,CAACC,MAAL,GAAcjB,QAAd,CAAuB,EAAvB,EAA2BkB,KAA3B,CAAiC,CAAC,CAAlC,CAArB,EAA2DtE,KAAK,CAACiE,OAAjE,CAAZ;AACA,YAAIvD,SAAS,GAAGX,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqB,KAAKjD,KAAL,CAAWH,kBAAX,CAA8BwC,QAA9B,EAArB,EAA+DpD,KAAK,CAACiE,OAArE,CAAhB;AACA,YAAIhD,OAAO,GAAGlB,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqB,KAAKjD,KAAL,CAAWG,gBAAX,CAA4BkC,QAA5B,EAArB,EAA6DpD,KAAK,CAACiE,OAAnE,CAAd;AACA,YAAIjC,cAAc,GAAGjC,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqB,KAAKjD,KAAL,CAAWiB,cAAhC,EAAgDhC,KAAK,CAACiE,OAAtD,CAArB;AACA,YAAIM,SAAS,GAAGxE,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqB,YAArB,EAAmChE,KAAK,CAACiE,OAAzC,CAAhB;AACA,YAAIO,UAAU,GAAGzE,QAAQ,CAACiD,GAAT,CAAagB,OAAb,CAAqB,KAAKjD,KAAL,CAAWkB,OAAhC,EAAyCjC,KAAK,CAACiE,OAA/C,CAAjB;AAEA,YAAIQ,UAAU,GAAG;AACb/C,UAAAA,aAAa,EAAEqC,KAAK,CAACX,QAAN,EADF;AAEbzB,UAAAA,aAAa,EAAEuC,KAAK,CAACd,QAAN,EAFF;AAGbxB,UAAAA,aAAa,EAAEmB,KAAK,CAACK,QAAN,EAHF;AAIbvB,UAAAA,gBAAgB,EAAEsC,IAAI,CAACf,QAAL,EAJL;AAKbxC,UAAAA,kBAAkB,EAAEF,SAAS,CAAC0C,QAAV,EALP;AAMblC,UAAAA,gBAAgB,EAAED,OAAO,CAACmC,QAAR,EANL;AAObsB,UAAAA,QAAQ,EAAE1C,cAAc,CAACoB,QAAf,EAPG;AAQbuB,UAAAA,MAAM,EAAEJ,SAAS,CAACnB,QAAV,EARK;AASbnB,UAAAA,OAAO,EAAEuC,UAAU,CAACpB,QAAX;AATI,SAAjB;AAYAvC,QAAAA,OAAO,CAACC,GAAR,CAAY2D,UAAZ;AAEA3E,QAAAA,KAAK,CAAC8E,IAAN,CAAW,YAAUzC,OAAO,CAACC,GAAR,CAAYC,gBAAtB,GAAuC,mBAAlD,EAAuEoC,UAAvE,EACCjC,IADD,CACO,UAACC,QAAD,EAAc;AAAC,cAAGA,QAAQ,CAACkC,MAAT,IAAmB,GAAtB,EAA0B;AACxBd,YAAAA,KAAK,CAAC,yBAAD,CAAL;AACH,WAFC,MAGE;AACA/D,YAAAA,KAAK,CAAC8E,IAAN,CAAW,YAAUzC,OAAO,CAACC,GAAR,CAAYC,gBAAtB,GAAuC,0BAAlD,EAA8E;AAC1ET,cAAAA,aAAa,EAAEmB,KAAK,CAACK,QAAN;AAD2D,aAA9E,EAGCZ,IAHD,CAGO,UAACC,QAAD,EAAc;AAAC5B,cAAAA,OAAO,CAACC,GAAR,CAAY2B,QAAQ,CAACC,IAArB;;AAC3B,cAAA,MAAI,CAAClC,KAAL,CAAWqE,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;;AACfC,cAAAA,MAAM,CAAClC,QAAP,CAAgBmC,MAAhB;AACA,aANoB;AAOH;AACZ,SAbT;AAeH;AACJ;;;6BAEO;AACR,UAAG,KAAKjE,KAAL,CAAWe,WAAX,CAAuBQ,KAAvB,CAA6B2C,IAA7B,KAAsC,WAAzC,EAAqD;AACpD,eACA,oBAAE,YAAF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA;AAEE,OAHH,MAGQ;AACJ,eACI;AAAK,UAAA,SAAS,EAAC,eAAf;AAA+B,UAAA,KAAK,EAAE;AAACC,YAAAA,UAAU,EAAE,GAAb;AAAkBC,YAAAA,WAAW,EAAE;AAA/B,WAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAM,UAAA,SAAS,EAAC,SAAhB;AAA0B,UAAA,QAAQ,EAAE,KAAK3D,QAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,EAEI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADJ,EAEI;AAAQ,UAAA,IAAI,EAAC,MAAb;AACQ,UAAA,SAAS,EAAC,cADlB;AAEQ,UAAA,KAAK,EAAE,KAAKT,KAAL,CAAWW,aAF1B;AAGQ,UAAA,QAAQ,EAAE,KAAKP,oBAHvB;AAIQ,UAAA,QAAQ,MAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CAFJ,EAUI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBADJ,EAEI;AAAQ,UAAA,IAAI,EAAC,MAAb;AACQ,UAAA,SAAS,EAAC,cADlB;AAEQ,UAAA,KAAK,EAAE,KAAKJ,KAAL,CAAWY,aAF1B;AAGQ,UAAA,QAAQ,EAAE,KAAKN,oBAHvB;AAIQ,UAAA,QAAQ,MAJhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CAVJ,EAkBI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADJ,EAEI;AACQ,UAAA,IAAI,EAAC,MADb;AAEQ,UAAA,SAAS,EAAC,cAFlB;AAGQ,UAAA,KAAK,EAAE,KAAKN,KAAL,CAAWa,aAH1B;AAIQ,UAAA,QAAQ,EAAE,KAAKN,oBAJvB;AAKQ,UAAA,QAAQ,MALhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CAlBJ,EA4BI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,EAEI;AAAO,UAAA,IAAI,EAAC,UAAZ;AAAuB,UAAA,EAAE,EAAC,cAA1B;AAAyC,UAAA,OAAO,EAAE,KAAKG,cAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAFJ,CA5BJ,EAiCI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCADJ,EAEI;AAAK,UAAA,KAAK,EAAE;AAAC2D,YAAAA,MAAM,EAAE;AAAT,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACA,oBAAC,cAAD;AACI,UAAA,WAAW,EAAC,YADhB;AAEI,UAAA,MAAM,EAAC,YAFX;AAGI,UAAA,UAAU,EAAE9E,UAHhB;AAII,UAAA,KAAK,EAAE,KAAKS,KAAL,CAAWH,kBAJtB;AAKI,UAAA,WAAW,EAAE,KAAKH,iBALtB;AAMI,UAAA,cAAc,EAAE;AACZ4E,YAAAA,YAAY,EAAE,KAAKtE,KAAL,CAAWH,kBADb;AAEZ0E,YAAAA,YAAY,EAAE;AACdC,cAAAA,UAAU,EAAE,CAAC,CAAD,EAAI,CAAJ;AADE;AAFF,WANpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADA,CAFJ,EAiBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAjBJ,EAkBI;AAAK,UAAA,KAAK,EAAE;AAACH,YAAAA,MAAM,EAAE;AAAT,WAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,cAAD;AACI,UAAA,WAAW,EAAC,YADhB;AAEI,UAAA,MAAM,EAAC,YAFX;AAGI,UAAA,UAAU,EAAE9E,UAHhB;AAII,UAAA,KAAK,EAAE,KAAKS,KAAL,CAAWG,gBAJtB;AAKI,UAAA,WAAW,EAAE,KAAKF,eALtB;AAMI,UAAA,cAAc,EAAE;AACZqE,YAAAA,YAAY,EAAE,KAAKtE,KAAL,CAAWG,gBADb;AAEZoE,YAAAA,YAAY,EAAE;AACdC,cAAAA,UAAU,EAAE,CAAC,CAAD,EAAI,CAAJ;AADE;AAFF,WANpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CAlBJ,CAjCJ,EAoEI;AAAK,UAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI;AAAO,UAAA,IAAI,EAAC,QAAZ;AAAqB,UAAA,KAAK,EAAC,aAA3B;AAAyC,UAAA,SAAS,EAAC,iBAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CApEJ,CADJ,CADJ;AA4EH;AACD;;;;EAhPuC1F,S;;SAAtBU,a","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport CryptoJS from \"react-native-crypto-js\";\r\nimport { codes } from \"../secrets/secrets.js\";\r\nimport AccessDenied from './modules/AccessDenied';\r\nimport { authService } from './modules/authService';\r\nimport moment from 'moment';\r\n\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport '@y0c/react-datepicker/assets/styles/calendar.scss';\r\nimport '../css/add-trainee.css';\r\n\r\nimport DayPickerInput from 'react-day-picker/DayPickerInput';\r\nimport 'react-day-picker/lib/style.css';\r\nimport MomentLocaleUtils, {\r\n    formatDate,\r\n  } from 'react-day-picker/moment';\r\n\r\nexport default class CreateTrainee extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.onChangeTraineeFname = this.onChangeTraineeFname.bind(this);\r\n        this.onChangeTraineeLname = this.onChangeTraineeLname.bind(this);\r\n        this.onChangeTraineeEmail = this.onChangeTraineeEmail.bind(this);\r\n        this.onChangeTraineePassword = this.onChangeTraineePassword.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n        this.onChangeStartDate = this.onChangeStartDate.bind(this);\r\n        this.onChangeEndDate = this.onChangeEndDate.bind(this);\r\n        this.onClickBursary = this.onClickBursary.bind(this);\r\n\r\n        this.state = {\r\n            trainee_fname: '',\r\n            trainee_lname: '',\r\n            trainee_email: '',\r\n            trainee_password: '',\r\n            trainee_start_date: '',\r\n            trainee_end_date: '',\r\n            currentUser: authService.currentUserValue,\r\n            recruiterEmail: '',\r\n            bursary: 'False'\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        axios.get('http://' + process.env.REACT_APP_AWS_IP + ':4000/admin/staff/' + this.state.currentUser.token._id)\r\n        .then(response => {\r\n          if(response.data == null){\r\n            authService.logout();\r\n            if (!authService.currentUserValue) {\r\n              document.location.href = 'http://' + process.env.REACT_APP_AWS_IP + ':3000/login';\r\n            }\r\n          }\r\n          else{\r\n            var email = CryptoJS.AES.decrypt(response.data.email, codes.staff, { iv: codes.iv }).toString(CryptoJS.enc.Utf8);\r\n\r\n            this.setState({\r\n              recruiterEmail: email\r\n            })\r\n          }\r\n        });\r\n    }\r\n    \r\n    onChangeTraineeFname(e) {\r\n        this.setState({\r\n            trainee_fname: e.target.value\r\n        });\r\n    }\r\n    \r\n    onChangeTraineeLname(e) {\r\n        this.setState({\r\n            trainee_lname: e.target.value\r\n        });\r\n    }\r\n\r\n\r\n    onChangeTraineeEmail(e) {\r\n        this.setState({\r\n            trainee_email: e.target.value\r\n        });\r\n    }\r\n    \r\n    onChangeTraineePassword(e) {\r\n        this.setState({\r\n            trainee_password: e.target.value\r\n        });\r\n    }\r\n\r\n    onChangeStartDate = (startDate) =>{\r\n        this.setState({\r\n            trainee_start_date: startDate\r\n        })\r\n\r\n        console.log(startDate);\r\n        console.log(this.state.trainee_start_date);\r\n    }\r\n\r\n    onChangeEndDate = (endDate) =>{\r\n        this.setState({\r\n            trainee_end_date: endDate\r\n        })\r\n        console.log(this.state.endDate);\r\n    }\r\n\r\n    onClickBursary(e) {\r\n        if(document.getElementById(\"bursaryValue\").checked){\r\n            this.setState({\r\n                bursary: \"True\"\r\n            });\r\n        }\r\n        else{\r\n            this.setState({\r\n                bursary: \"False\"\r\n            });\r\n        }\r\n    }\r\n\r\n    onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        if(this.state.trainee_start_date === '' || this.state.trainee_end_date === ''){\r\n            alert('Please select the bursary start/end dates');\r\n        }\r\n        else if(moment(this.state.trainee_end_date).isBefore(this.state.trainee_start_date)){\r\n            alert('The end date is before the start date, please resolve this before creating the trainee');\r\n        }\r\n        else{\r\n            console.log(`Form submitted:`);\r\n            console.log(`Trainee Fname: ${this.state.trainee_fname}`);\r\n            console.log(`Trainee Lname: ${this.state.trainee_lname}`);\r\n            console.log(`Trainee Email: ${this.state.trainee_email}`);\r\n            console.log(this.state.bursary);\r\n            \r\n            var fname = CryptoJS.AES.encrypt(this.state.trainee_fname, codes.trainee);\r\n            var lname = CryptoJS.AES.encrypt(this.state.trainee_lname, codes.trainee);\r\n            var email = CryptoJS.AES.encrypt(this.state.trainee_email, codes.staff, {iv: codes.iv});\r\n            var pass  = CryptoJS.AES.encrypt(Math.random().toString(36).slice(-8), codes.trainee);\r\n            var startDate = CryptoJS.AES.encrypt(this.state.trainee_start_date.toString(), codes.trainee);\r\n            var endDate = CryptoJS.AES.encrypt(this.state.trainee_end_date.toString(), codes.trainee);\r\n            var recruiterEmail = CryptoJS.AES.encrypt(this.state.recruiterEmail, codes.trainee);\r\n            var setStatus = CryptoJS.AES.encrypt('Incomplete', codes.trainee);\r\n            var setBursary = CryptoJS.AES.encrypt(this.state.bursary, codes.trainee);\r\n\r\n            var newTrainee = {\r\n                trainee_fname: fname.toString(),\r\n                trainee_lname: lname.toString(),\r\n                trainee_email: email.toString(),\r\n                trainee_password: pass.toString(),\r\n                trainee_start_date: startDate.toString(),\r\n                trainee_end_date: endDate.toString(),\r\n                added_By: recruiterEmail.toString(),\r\n                status: setStatus.toString(),\r\n                bursary: setBursary.toString()\r\n            };\r\n\r\n            console.log(newTrainee);\r\n            \r\n            axios.post('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/add', newTrainee)\r\n            .then( (response) => {if(response.status == 205){\r\n                                    alert(\"Email is already in use\");\r\n                                }\r\n                                else{\r\n                                    axios.post('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/send-email', {\r\n                                        trainee_email: email.toString()\r\n                                        })\r\n                                    .then( (response) => {console.log(response.data);\r\n\t\t\t\t\t\t\t\t\t                      this.props.history.push('/');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  window.location.reload();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t });\r\n                                }\r\n                    }   \r\n            );  \r\n        }      \r\n    }\r\n    \r\n   render() {\r\n\t   if(this.state.currentUser.token.role !== 'recruiter'){\r\n\t\t   return (\r\n\t\t   < AccessDenied />\r\n\t   );} else{\r\n        return (\r\n            <div className=\"createTrainee\" style={{marginLeft: 100, marginRight: 100}}>\r\n                <form className=\"addForm\" onSubmit={this.onSubmit}>\r\n                    <h3>Add Trainee</h3>\r\n                    <div className=\"form-group\"> \r\n                        <label>First Name: </label>\r\n                        <input  type=\"text\"\r\n                                className=\"form-control\"\r\n                                value={this.state.trainee_fname}\r\n                                onChange={this.onChangeTraineeFname}\r\n                                required/>\r\n                    </div>\r\n                    <div className=\"form-group\"> \r\n                        <label>Last Name: </label>\r\n                        <input  type=\"text\"\r\n                                className=\"form-control\"\r\n                                value={this.state.trainee_lname}\r\n                                onChange={this.onChangeTraineeLname}\r\n                                required/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Email: </label>\r\n                        <input \r\n                                type=\"text\" \r\n                                className=\"form-control\"\r\n                                value={this.state.trainee_email}\r\n                                onChange={this.onChangeTraineeEmail}\r\n                                required/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label> Bursary: </label>\r\n                        <input type=\"checkbox\" id=\"bursaryValue\" onClick={this.onClickBursary}/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\" >\r\n                        <label> Bursary Start Date</label>\r\n                        <div style={{height: '50px'}}>\r\n                        <DayPickerInput\r\n                            placeholder=\"DD/MM/YYYY\"\r\n                            format=\"DD/MM/YYYY\"\r\n                            formatDate={formatDate}\r\n                            value={this.state.trainee_start_date}\r\n                            onDayChange={this.onChangeStartDate}\r\n                            dayPickerProps={{\r\n                                selectedDays: this.state.trainee_start_date,\r\n                                disabledDays: {\r\n                                daysOfWeek: [0, 6],\r\n                                },\r\n                            }} \r\n                        />\r\n                        </div>\r\n                        <label> Bursary End Date </label>\r\n                        <div style={{height: '50px'}}>\r\n                            <DayPickerInput\r\n                                placeholder=\"DD/MM/YYYY\"\r\n                                format=\"DD/MM/YYYY\"\r\n                                formatDate={formatDate}\r\n                                value={this.state.trainee_end_date}\r\n                                onDayChange={this.onChangeEndDate}\r\n                                dayPickerProps={{\r\n                                    selectedDays: this.state.trainee_end_date,\r\n                                    disabledDays: {\r\n                                    daysOfWeek: [0, 6],\r\n                                    },\r\n                                }}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <input type=\"submit\" value=\"Add Trainee\" className=\"btn btn-primary\" />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n   }\r\n}"]},"metadata":{},"sourceType":"module"}