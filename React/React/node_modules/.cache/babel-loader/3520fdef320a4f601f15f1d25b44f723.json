{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\src\\\\components\\\\forgot-password.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport CryptoJS from \"react-native-crypto-js\";\nimport { codes } from \"../secrets/secrets.js\";\nimport '../css/changePasswordTrainee.css';\n\nvar ForgotPass =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ForgotPass, _Component);\n\n  function ForgotPass(props) {\n    var _this;\n\n    _classCallCheck(this, ForgotPass);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ForgotPass).call(this, props));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeEmail = _this.onChangeEmail.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      email: '',\n      error: true\n    };\n    return _this;\n  }\n\n  _createClass(ForgotPass, [{\n    key: \"onChangeEmail\",\n    value: function onChangeEmail(e) {\n      this.setState({\n        email: e.target.value\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      var email = CryptoJS.AES.encrypt(this.state.email, codes.staff, {\n        iv: codes.iv\n      });\n      console.log(email);\n      axios.post('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/getByEmail', {\n        trainee_email: email.toString()\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.data == null) {\n          axios.post('http://' + process.env.REACT_APP_AWS_IP + ':4000/admin/getByEmail', {\n            staff_email: email.toString()\n          }).then(function (response) {\n            if (response.data == null) {\n              alert(\"email not found\");\n            } else {\n              axios.post('http://' + process.env.REACT_APP_AWS_IP + ':4000/admin/send-email-staff', {\n                email: email.toString()\n              }).then(function (response) {\n                console.log(response.data);\n\n                _this2.props.history.push('/login');\n\n                window.location.reload();\n              });\n            }\n          });\n        } else {\n          console.log(\"trainee found\");\n          axios.post('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/send-email', {\n            trainee_email: email.toString()\n          }).then(function (response) {\n            console.log(response.data);\n\n            _this2.props.history.push('/login');\n\n            window.location.reload();\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"resetPassword\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        className: \"changeForm\",\n        onSubmit: this.onSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        align: \"center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Forgot Password\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Please enter your email address below, a link will be sent to that account to reset your password.\"), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Email: \"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.email,\n        onChange: this.onChangeEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Send Email\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return ForgotPass;\n}(Component);\n\nexport { ForgotPass as default };","map":{"version":3,"sources":["C:\\Users\\Chi Zhang\\Desktop\\QA Bursary project\\AWS-Bursary-Project-V1\\React\\src\\components\\forgot-password.component.js"],"names":["React","Component","axios","CryptoJS","codes","ForgotPass","props","onSubmit","bind","onChangeEmail","state","email","error","e","setState","target","value","preventDefault","AES","encrypt","staff","iv","console","log","post","process","env","REACT_APP_AWS_IP","trainee_email","toString","then","response","data","staff_email","alert","history","push","window","location","reload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport CryptoJS from \"react-native-crypto-js\";\r\nimport { codes } from \"../secrets/secrets.js\";\r\nimport '../css/changePasswordTrainee.css';\r\n\r\nexport default class ForgotPass extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n\t\t\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n\t\tthis.onChangeEmail = this.onChangeEmail.bind(this);\r\n\r\n        this.state = {\r\n            email: '',\r\n            error: true\r\n        }\r\n    }\r\n    \r\n\tonChangeEmail(e) {\r\n        this.setState({\r\n            email: e.target.value\r\n        });\r\n    }\r\n    \r\n    onSubmit(e) {\r\n\t\te.preventDefault();\r\n\t\tvar email = CryptoJS.AES.encrypt(this.state.email, codes.staff, {iv: codes.iv});\r\n\t\tconsole.log(email);\r\n\t\t\r\n\t\taxios.post('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/getByEmail', {trainee_email: email.toString()})\r\n\t\t.then( (response) => {console.log(response);\r\n                                if(response.data == null) {\r\n                                    axios.post('http://'+process.env.REACT_APP_AWS_IP+':4000/admin/getByEmail', {staff_email: email.toString()})\r\n\t\t\t\t\t\t\t\t\t.then ( (response) => {\r\n\t\t\t\t\t\t\t\t\t\tif(response.data == null){\r\n\t\t\t\t\t\t\t\t\t\t\talert(\"email not found\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\taxios.post('http://'+process.env.REACT_APP_AWS_IP+':4000/admin/send-email-staff', {email: email.toString()})\r\n\t\t\t\t\t\t\t\t\t\t\t.then( (response) => {console.log(response.data);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  this.props.history.push('/login');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  window.location.reload();\r\n                                            });\r\n                                        }\r\n\t\t\t\t\t\t\t\t\t})\r\n                                 }\r\n                                else{\r\n                                    console.log(\"trainee found\")\r\n\t\t\t\t\t\t\t\t\taxios.post('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/send-email', {trainee_email: email.toString()})\r\n\t\t\t\t\t\t\t\t\t.then( (response) => {console.log(response.data);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  this.props.history.push('/login');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  window.location.reload();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n                                 }\r\n            })\r\n\t\t\t\t \r\n\t\t} \r\n\t\t\r\n\r\n    \r\n    render() {\r\n        \r\n        return (\r\n            <div className=\"resetPassword\">\r\n                <form className=\"changeForm\" onSubmit={this.onSubmit}>\r\n                    <h3 align=\"center\">Forgot Password</h3>\r\n\t\t\t\t\t<p>Please enter your email address below, a link will be sent to that account to reset your password.</p>\r\n                    <div className=\"form-group\">\r\n                        <label>Email: </label>\r\n                        <input type=\"text\" \r\n                               className=\"form-control\"\r\n\t\t\t\t\t\t\t   value={this.state.email}\r\n                               onChange={this.onChangeEmail}\r\n                        />\r\n                    </div>\r\n                    \r\n                    <br />\r\n                    <div className=\"form-group\">\r\n                        <input type=\"submit\" value=\"Send Email\" className=\"btn btn-primary\" />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}