{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\src\\\\components\\\\list-trainee.component.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport CryptoJS from \"react-native-crypto-js\";\nimport { codes } from \"../secrets/secrets.js\";\nimport AccessDenied from './modules/AccessDenied';\nimport { authService } from './modules/authService';\nimport '../css/list-trainee-recruiter.css';\n\nvar ListTrainee =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ListTrainee, _Component);\n\n  function ListTrainee(props) {\n    var _this;\n\n    _classCallCheck(this, ListTrainee);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ListTrainee).call(this, props));\n    _this.state = {\n      trainees: [],\n      searchString: \"\",\n      currentUser: authService.currentUserValue\n    }; //Added onChangeSearch - Ernie\n\n    _this.onChangeSearch = _this.onChangeSearch.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(ListTrainee, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.get('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/').then(function (response) {\n        var encrypted = response.data;\n        encrypted.map(function (currentTrainee, i) {\n          var bytes = CryptoJS.AES.decrypt(currentTrainee.trainee_email, codes.staff, {\n            iv: codes.iv\n          });\n          currentTrainee.trainee_email = bytes.toString(CryptoJS.enc.Utf8);\n          bytes = CryptoJS.AES.decrypt(currentTrainee.trainee_fname, codes.trainee);\n          currentTrainee.trainee_fname = bytes.toString(CryptoJS.enc.Utf8);\n          bytes = CryptoJS.AES.decrypt(currentTrainee.trainee_lname, codes.trainee);\n          currentTrainee.trainee_lname = bytes.toString(CryptoJS.enc.Utf8);\n          bytes = CryptoJS.AES.decrypt(currentTrainee.status, codes.trainee);\n          currentTrainee.status = bytes.toString(CryptoJS.enc.Utf8);\n          bytes = CryptoJS.AES.decrypt(currentTrainee.added_By, codes.trainee);\n          currentTrainee.added_By = bytes.toString(CryptoJS.enc.Utf8);\n          bytes = CryptoJS.AES.decrypt(currentTrainee.bursary, codes.trainee);\n          currentTrainee.bursary = bytes.toString(CryptoJS.enc.Utf8);\n        });\n\n        _this2.setState({\n          trainees: encrypted\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    } // Added onChangeSearch(e) function. Needed for the search filter\n\n  }, {\n    key: \"onChangeSearch\",\n    value: function onChangeSearch(e) {\n      this.setState({\n        searchString: e.target.value\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      //Declared variables in order to read input from search function\n      var trainees = this.state.trainees;\n      var search = this.state.searchString.trim().toLowerCase().replace(/\\s+/g, '');\n\n      if (search.length > 0) {\n        trainees = trainees.filter(function (i) {\n          if (i.trainee_fname.toLowerCase().match(search) || i.trainee_lname.toLowerCase().match(search) || i.trainee_email.toLowerCase().match(search) || (i.trainee_fname.toLowerCase() + i.trainee_lname.toLowerCase() + i.trainee_email.toLowerCase()).match(search)) {\n            return i;\n          }\n        });\n      }\n\n      if (this.state.currentUser.token.role === undefined) {\n        return React.createElement(AccessDenied, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        });\n      } else if (this.state.currentUser.token.role === 'recruiter') {\n        return React.createElement(\"div\", {\n          className: \"bigBox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"QAtable\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"QASearchBar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          value: this.state.searchString,\n          onChange: this.onChangeSearch,\n          placeholder: \"Find trainee...\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          id: \"addUser\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          className: \"qabtn\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(Link, {\n          className: \"link\",\n          to: \"/create\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, \"Add Trainee\")))), React.createElement(\"table\", {\n          className: \"table table-striped\",\n          style: {\n            marginTop: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \"First Name\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, \"Last Name\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"Email\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, \"Status\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, \"Recruited By\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, \"Bursary\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, \"Action\"))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, trainees.map(function (t) {\n          return React.createElement(\"tr\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 109\n            },\n            __self: this\n          }, \" \", t.trainee_fname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110\n            },\n            __self: this\n          }, \" \", t.trainee_lname), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, \" \", t.trainee_email), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 112\n            },\n            __self: this\n          }, \" \", t.status), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 113\n            },\n            __self: this\n          }, \" \", t.added_By), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114\n            },\n            __self: this\n          }, \" \", t.bursary), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115\n            },\n            __self: this\n          }, \" \", React.createElement(\"button\", {\n            onClick: function onClick() {\n              return window.location.href = \"/editDates/\" + t._id;\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115\n            },\n            __self: this\n          }, \" Edit \"), React.createElement(\"button\", {\n            onClick: function onClick() {\n              return axios.get('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/delete/' + t._id).then(function (response) {\n                return window.location.reload();\n              });\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116\n            },\n            __self: this\n          }, \"Delete\")));\n        })))));\n      } else {\n        return React.createElement(\"div\", {\n          className: \"bigBox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"QAtable\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"QASearchBar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          value: this.state.searchString,\n          onChange: this.onChangeSearch,\n          placeholder: \"Find trainee...\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        })), React.createElement(\"table\", {\n          className: \"table table-striped\",\n          style: {\n            marginTop: 20\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, \"First Name\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"Last Name\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, \"Email\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, \"Status\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, \"Recruited By\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, \"Bursary\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, \"Action\"))), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, trainees.map(function (t) {\n          if (_this3.state.currentUser.token.role === 'admin') {\n            return React.createElement(\"tr\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 157\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 158\n              },\n              __self: this\n            }, \" \", t.trainee_fname), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 159\n              },\n              __self: this\n            }, \" \", t.trainee_lname), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 160\n              },\n              __self: this\n            }, \" \", t.trainee_email), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 161\n              },\n              __self: this\n            }, \" \", t.status), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 162\n              },\n              __self: this\n            }, \" \", t.added_By), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 163\n              },\n              __self: this\n            }, \" \", t.bursary), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 164\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 165\n              },\n              __self: this\n            }, React.createElement(\"button\", {\n              onClick: function onClick() {\n                return window.location.href = \"/editDates/\" + t._id;\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 166\n              },\n              __self: this\n            }, \" Edit \"), \" \"), React.createElement(\"button\", {\n              onClick: function onClick() {\n                return axios.get('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/delete/' + t._id).then(function (response) {\n                  return window.location.reload();\n                });\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 167\n              },\n              __self: this\n            }, \"Delete\")));\n          } else if (_this3.state.currentUser.token.role === 'finance') {\n            return React.createElement(\"tr\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 174\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 175\n              },\n              __self: this\n            }, \" \", t.trainee_fname), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 176\n              },\n              __self: this\n            }, \" \", t.trainee_lname), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 177\n              },\n              __self: this\n            }, \" \", t.trainee_email), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 178\n              },\n              __self: this\n            }, \" \", t.status), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 179\n              },\n              __self: this\n            }, \" \", t.added_By), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 180\n              },\n              __self: this\n            }, \" \", t.bursary), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 181\n              },\n              __self: this\n            }, React.createElement(\"button\", {\n              onClick: function onClick() {\n                return window.location.href = \"/trainee-details/\" + t._id;\n              },\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 182\n              },\n              __self: this\n            }, \" View Details \")));\n          }\n        })))));\n      }\n    }\n  }]);\n\n  return ListTrainee;\n}(Component);\n\nexport { ListTrainee as default };","map":{"version":3,"sources":["C:\\Users\\Chi Zhang\\Desktop\\QA Bursary project\\AWS-Bursary-Project-V1\\React\\src\\components\\list-trainee.component.js"],"names":["React","Component","Link","axios","CryptoJS","codes","AccessDenied","authService","ListTrainee","props","state","trainees","searchString","currentUser","currentUserValue","onChangeSearch","bind","get","process","env","REACT_APP_AWS_IP","then","response","encrypted","data","map","currentTrainee","i","bytes","AES","decrypt","trainee_email","staff","iv","toString","enc","Utf8","trainee_fname","trainee","trainee_lname","status","added_By","bursary","setState","catch","error","console","log","e","target","value","search","trim","toLowerCase","replace","length","filter","match","token","role","undefined","marginTop","t","window","location","href","_id","reload"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport CryptoJS from \"react-native-crypto-js\";\r\nimport { codes } from \"../secrets/secrets.js\";\r\nimport AccessDenied from './modules/AccessDenied';\r\nimport { authService } from './modules/authService';\r\nimport '../css/list-trainee-recruiter.css';\r\n\r\nexport default class ListTrainee extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n\t\t\t\r\n        this.state = {\r\n\t\t\ttrainees: [], \r\n\t\t\tsearchString: \"\",\r\n\t\t\tcurrentUser: authService.currentUserValue\r\n\t\t\t};\r\n        \r\n       //Added onChangeSearch - Ernie\r\n        this.onChangeSearch = this.onChangeSearch.bind(this);\r\n    }\r\n    \r\n    componentDidMount() {\r\n        axios.get('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/')\r\n            .then(response => {\r\n                var encrypted = response.data;\r\n                encrypted.map(function(currentTrainee, i){\r\n                    var bytes  = CryptoJS.AES.decrypt(currentTrainee.trainee_email, codes.staff, {iv: codes.iv});\r\n                    currentTrainee.trainee_email = bytes.toString(CryptoJS.enc.Utf8);\r\n                    bytes = CryptoJS.AES.decrypt(currentTrainee.trainee_fname, codes.trainee);\r\n                    currentTrainee.trainee_fname = bytes.toString(CryptoJS.enc.Utf8);\r\n                    bytes = CryptoJS.AES.decrypt(currentTrainee.trainee_lname, codes.trainee);\r\n                    currentTrainee.trainee_lname = bytes.toString(CryptoJS.enc.Utf8);\r\n                    bytes = CryptoJS.AES.decrypt(currentTrainee.status, codes.trainee);\r\n                    currentTrainee.status = bytes.toString(CryptoJS.enc.Utf8);\r\n                    bytes = CryptoJS.AES.decrypt(currentTrainee.added_By, codes.trainee);\r\n                    currentTrainee.added_By = bytes.toString(CryptoJS.enc.Utf8);\r\n                    bytes = CryptoJS.AES.decrypt(currentTrainee.bursary, codes.trainee);\r\n                    currentTrainee.bursary = bytes.toString(CryptoJS.enc.Utf8);\r\n                });\r\n                this.setState({trainees: encrypted});\r\n            })\r\n            .catch(function (error){\r\n                console.log(error);\r\n            })\r\n    }\r\n\r\n    // Added onChangeSearch(e) function. Needed for the search filter\r\n    onChangeSearch(e) {\r\n        this.setState({\r\n            searchString: e.target.value\r\n        });\r\n    }\r\n\t\r\n    render() {\r\n        //Declared variables in order to read input from search function\r\n        let trainees = this.state.trainees;\r\n        let search = this.state.searchString.trim().toLowerCase().replace(/\\s+/g, '');\r\n        \r\n        if(search.length > 0){\r\n            trainees = trainees.filter(function(i){\r\n                if(i.trainee_fname.toLowerCase().match(search) ||\r\n                   i.trainee_lname.toLowerCase().match(search) ||\r\n                   i.trainee_email.toLowerCase().match(search) ||\r\n                   (i.trainee_fname.toLowerCase() + i.trainee_lname.toLowerCase() + i.trainee_email.toLowerCase()).match(search)){\r\n                    return i;\r\n                }\r\n            })\r\n        }\r\n\t\tif (this.state.currentUser.token.role === undefined){\r\n\t\t\treturn (\r\n\t\t\t<AccessDenied/>\r\n\t\t\t)\r\n\t\t}\r\n\t\telse if(this.state.currentUser.token.role === 'recruiter'){\r\n\t\t\treturn (\r\n            <div className=\"bigBox\">\r\n            <div className=\"QAtable\">\r\n                <div className=\"QASearchBar\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={this.state.searchString}\r\n                        onChange={this.onChangeSearch}\r\n                        placeholder=\"Find trainee...\"\r\n                    />\r\n                    <div id=\"addUser\">\r\n                        <button className=\"qabtn\"><Link className=\"link\" to={\"/create\"}>Add Trainee</Link></button>\r\n                    </div>\r\n                </div>\r\n\r\n                <table className=\"table table-striped\" style={{ marginTop: 20 }} >\r\n                    <thead>\r\n                        <tr>\r\n                            <th>First Name</th>\r\n                            <th>Last Name</th>\r\n                            <th>Email</th>\r\n                            <th>Status</th>\r\n                            <th>Recruited By</th>\r\n                            <th>Bursary</th>\r\n                            <th>Action</th>\r\n                        </tr>\r\n                    </thead>               \r\n                    <tbody>\r\n                        {trainees.map(t => {\r\n                            return (\r\n                                <tr>\r\n                                    <td> {t.trainee_fname}</td>\r\n                                    <td> {t.trainee_lname}</td>\r\n                                    <td> {t.trainee_email}</td>\r\n                                    <td> {t.status}</td>\r\n                                    <td> {t.added_By}</td>\r\n                                    <td> {t.bursary}</td>\r\n                                    <td> <button onClick={() => window.location.href=\"/editDates/\"+t._id}> Edit </button> \r\n                                    <button onClick={()=>axios.get('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/delete/'+t._id).then((response) => window.location.reload())}>Delete</button>\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n                        })}\r\n                    </tbody>\r\n\r\n                </table>\r\n            </div>\r\n            </div>\r\n        );\r\n\t\t\t\r\n\t\t}else{\r\n        return (\r\n            <div className=\"bigBox\">\r\n            <div className=\"QAtable\">\r\n                <div className=\"QASearchBar\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={this.state.searchString}\r\n                        onChange={this.onChangeSearch}\r\n                        placeholder=\"Find trainee...\"\r\n                    />\r\n                </div>\r\n\r\n                <table className=\"table table-striped\" style={{ marginTop: 20 }} >\r\n                    <thead>\r\n                        <tr>\r\n                            <th>First Name</th>\r\n                            <th>Last Name</th>\r\n                            <th>Email</th>\r\n                            <th>Status</th>\r\n                            <th>Recruited By</th>\r\n                            <th>Bursary</th>\r\n                            <th>Action</th>\r\n                        </tr>\r\n                    </thead>               \r\n                    <tbody>\r\n                        {trainees.map(t => {\r\n\t\t\t\t\t\t\tif (this.state.currentUser.token.role === 'admin'){\r\n                            return (\r\n                                <tr>\r\n                                    <td> {t.trainee_fname}</td>\r\n                                    <td> {t.trainee_lname}</td>\r\n                                    <td> {t.trainee_email}</td>\r\n                                    <td> {t.status}</td>\r\n                                    <td> {t.added_By}</td>\r\n                                    <td> {t.bursary}</td>\r\n                                    <td>\r\n                                    <td> \r\n                                        <button onClick={() => window.location.href=\"/editDates/\"+t._id}> Edit </button> </td>\r\n                                        <button onClick={()=>axios.get('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/delete/'+t._id).then((response) => window.location.reload())}>Delete</button>\r\n\t\t\t\t\t\t\t\t   </td>\r\n                                </tr>\r\n                            );\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if(this.state.currentUser.token.role === 'finance'){\r\n\t\t\t\t\t\t\treturn (\r\n                                <tr>\r\n                                    <td> {t.trainee_fname}</td>\r\n                                    <td> {t.trainee_lname}</td>\r\n                                    <td> {t.trainee_email}</td>\r\n                                    <td> {t.status}</td>\r\n                                    <td> {t.added_By}</td>\r\n                                    <td> {t.bursary}</td>\r\n                                    <td> \r\n\t\t\t\t\t\t\t\t\t\t<button onClick={()=>window.location.href=\"/trainee-details/\"+t._id}> View Details </button>\r\n                                    </td>\r\n                                </tr>\r\n                            );\r\n\t\t\t\t\t\t\t}\r\n                        })}\r\n                    </tbody>\r\n\r\n                </table>\r\n            </div>\r\n            </div>\r\n        );\r\n\t\t}\r\n\t}\r\n}"]},"metadata":{},"sourceType":"module"}