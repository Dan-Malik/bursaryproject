{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport { handleResponse } from './handle-response';\nvar items = localStorage.getItem('currentUser');\nvar currentUserSubject = new BehaviorSubject(JSON.parse(items));\nexport var authService = {\n  login: login,\n  logout: logout,\n  currentUser: currentUserSubject.asObservable(),\n\n  get currentUserValue() {\n    return currentUserSubject.value;\n  }\n\n};\n\nfunction login(email, password) {\n  var requestOptions = {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      email: email,\n      password: password\n    })\n  };\n  return fetch('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/auth/protected', requestOptions).then(handleResponse).then(function (user) {\n    // store user details and jwt token in local storage to keep user logged in between page refreshes\n    localStorage.setItem('currentUser', JSON.stringify(user));\n    currentUserSubject.next(user);\n    return user;\n  });\n}\n\nfunction logout() {\n  // remove user from local storage to log user out\n  localStorage.removeItem('currentUser');\n  currentUserSubject.next(null);\n}","map":{"version":3,"sources":["C:\\Users\\Chi Zhang\\Desktop\\QA Bursary project\\AWS-Bursary-Project-V1\\React\\src\\components\\modules\\authService.js"],"names":["BehaviorSubject","handleResponse","items","localStorage","getItem","currentUserSubject","JSON","parse","authService","login","logout","currentUser","asObservable","currentUserValue","value","email","password","requestOptions","method","headers","body","stringify","fetch","process","env","REACT_APP_AWS_IP","then","user","setItem","next","removeItem"],"mappings":"AAAA,SAASA,eAAT,QAAgC,MAAhC;AAEA,SAASC,cAAT,QAA+B,mBAA/B;AAEA,IAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAd;AACA,IAAMC,kBAAkB,GAAG,IAAIL,eAAJ,CAAoBM,IAAI,CAACC,KAAL,CAAWL,KAAX,CAApB,CAA3B;AAEA,OAAO,IAAMM,WAAW,GAAG;AACvBC,EAAAA,KAAK,EAALA,KADuB;AAEvBC,EAAAA,MAAM,EAANA,MAFuB;AAGvBC,EAAAA,WAAW,EAAEN,kBAAkB,CAACO,YAAnB,EAHU;;AAIvB,MAAIC,gBAAJ,GAAwB;AAAE,WAAOR,kBAAkB,CAACS,KAA1B;AAAiC;;AAJpC,CAApB;;AAOP,SAASL,KAAT,CAAeM,KAAf,EAAsBC,QAAtB,EAAgC;AAC5B,MAAMC,cAAc,GAAG;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,OAAO,EAAE;AAAE,sBAAgB;AAAlB,KAFU;AAGnBC,IAAAA,IAAI,EAAEd,IAAI,CAACe,SAAL,CAAe;AAAEN,MAAAA,KAAK,EAALA,KAAF;AAASC,MAAAA,QAAQ,EAARA;AAAT,KAAf;AAHa,GAAvB;AAMA,SAAOM,KAAK,CAAE,YAAUC,OAAO,CAACC,GAAR,CAAYC,gBAAtB,GAAuC,8BAAzC,EAAyER,cAAzE,CAAL,CACFS,IADE,CACGzB,cADH,EAEFyB,IAFE,CAEG,UAAAC,IAAI,EAAI;AACV;AACAxB,IAAAA,YAAY,CAACyB,OAAb,CAAqB,aAArB,EAAoCtB,IAAI,CAACe,SAAL,CAAeM,IAAf,CAApC;AACAtB,IAAAA,kBAAkB,CAACwB,IAAnB,CAAwBF,IAAxB;AAEA,WAAOA,IAAP;AACH,GARE,CAAP;AASH;;AAED,SAASjB,MAAT,GAAkB;AACd;AACAP,EAAAA,YAAY,CAAC2B,UAAb,CAAwB,aAAxB;AACAzB,EAAAA,kBAAkB,CAACwB,IAAnB,CAAwB,IAAxB;AACH","sourcesContent":["import { BehaviorSubject } from 'rxjs';\r\n\r\nimport { handleResponse } from './handle-response';\r\n\r\nconst items = localStorage.getItem('currentUser');\r\nconst currentUserSubject = new BehaviorSubject(JSON.parse(items));\r\n\r\nexport const authService = {\r\n    login,\r\n    logout,\r\n    currentUser: currentUserSubject.asObservable(),\r\n    get currentUserValue () { return currentUserSubject.value }\r\n};\r\n\r\nfunction login(email, password) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email, password })\r\n    };\r\n\r\n    return fetch( 'http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/auth/protected', requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n            localStorage.setItem('currentUser', JSON.stringify(user));\r\n            currentUserSubject.next(user);\r\n\r\n            return user;\r\n        });\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('currentUser');\r\n    currentUserSubject.next(null);\r\n}"]},"metadata":{},"sourceType":"module"}