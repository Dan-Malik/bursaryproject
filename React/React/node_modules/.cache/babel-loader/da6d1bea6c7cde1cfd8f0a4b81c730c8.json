{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\Chi Zhang\\\\Desktop\\\\QA Bursary project\\\\AWS-Bursary-Project-V1\\\\React\\\\src\\\\components\\\\create-trainee.component.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport CryptoJS from \"react-native-crypto-js\";\nimport { codes } from \"../secrets/secrets.js\";\nimport AccessDenied from './modules/AccessDenied';\nimport { authService } from './modules/authService';\nimport DatePicker from 'react-datepicker';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport '@y0c/react-datepicker/assets/styles/calendar.scss';\nimport '../css/add-trainee.css';\n\nvar CreateTrainee =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateTrainee, _Component);\n\n  function CreateTrainee(props) {\n    var _this;\n\n    _classCallCheck(this, CreateTrainee);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateTrainee).call(this, props));\n\n    _this.onChangeStartDate = function (startDate) {\n      _this.setState({\n        trainee_start_date: startDate\n      });\n\n      console.log(startDate);\n      console.log(_this.state.trainee_start_date);\n    };\n\n    _this.onChangeEndDate = function (endDate) {\n      _this.setState({\n        trainee_end_date: endDate\n      });\n\n      console.log(_this.state.endDate);\n    };\n\n    _this.onChangeTraineeFname = _this.onChangeTraineeFname.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeTraineeLname = _this.onChangeTraineeLname.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeTraineeEmail = _this.onChangeTraineeEmail.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeTraineePassword = _this.onChangeTraineePassword.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onSubmit = _this.onSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeStartDate = _this.onChangeStartDate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.onChangeEndDate = _this.onChangeEndDate.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.state = {\n      trainee_fname: '',\n      trainee_lname: '',\n      trainee_email: '',\n      trainee_password: '',\n      trainee_start_date: '',\n      trainee_end_date: '',\n      currentUser: authService.currentUserValue\n    };\n    return _this;\n  }\n\n  _createClass(CreateTrainee, [{\n    key: \"onChangeTraineeFname\",\n    value: function onChangeTraineeFname(e) {\n      this.setState({\n        trainee_fname: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeTraineeLname\",\n    value: function onChangeTraineeLname(e) {\n      this.setState({\n        trainee_lname: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeTraineeEmail\",\n    value: function onChangeTraineeEmail(e) {\n      this.setState({\n        trainee_email: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeTraineePassword\",\n    value: function onChangeTraineePassword(e) {\n      this.setState({\n        trainee_password: e.target.value\n      });\n    }\n  }, {\n    key: \"onSubmit\",\n    value: function onSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n\n      if (this.state.trainee_start_date == '' || this.state.trainee_end_date == '') {\n        alert('Please select the bursary start/end dates');\n      } else {\n        console.log(\"Form submitted:\");\n        console.log(\"Trainee Fname: \".concat(this.state.trainee_fname));\n        console.log(\"Trainee Lname: \".concat(this.state.trainee_lname));\n        console.log(\"Trainee Email: \".concat(this.state.trainee_email));\n        var fname = CryptoJS.AES.encrypt(this.state.trainee_fname, codes.trainee);\n        var lname = CryptoJS.AES.encrypt(this.state.trainee_lname, codes.trainee);\n        var email = CryptoJS.AES.encrypt(this.state.trainee_email, codes.staff, {\n          iv: codes.iv\n        });\n        var pass = CryptoJS.AES.encrypt(Math.random().toString(36).slice(-8), codes.trainee);\n        var startDate = CryptoJS.AES.encrypt(this.state.trainee_start_date.toString(), codes.trainee);\n        var endDate = CryptoJS.AES.encrypt(this.state.trainee_end_date.toString(), codes.trainee);\n        var newTrainee = {\n          trainee_fname: fname.toString(),\n          trainee_lname: lname.toString(),\n          trainee_email: email.toString(),\n          trainee_password: pass.toString(),\n          trainee_start_date: startDate.toString(),\n          trainee_end_date: endDate.toString()\n        };\n        console.log(newTrainee);\n        axios.post('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/add', newTrainee).then(function (response) {\n          if (response.status == 205) {\n            alert(\"Email is already in use\");\n          } else {\n            axios.post('http://' + process.env.REACT_APP_AWS_IP + ':4000/trainee/send-email', {\n              trainee_email: email.toString()\n            }).then(function (response) {\n              console.log(response.data);\n\n              _this2.props.history.push('/');\n\n              window.location.reload();\n            });\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.currentUser.token.role !== 'recruiter') {\n        return React.createElement(AccessDenied, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        });\n      } else {\n        return React.createElement(\"div\", {\n          className: \"createTrainee\",\n          style: {\n            marginLeft: 100,\n            marginRight: 100\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, React.createElement(\"form\", {\n          className: \"addForm\",\n          onSubmit: this.onSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"h3\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, \"Add Trainee\"), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, \"First Name: \"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: this.state.trainee_fname,\n          onChange: this.onChangeTraineeFname,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, \"Last Name: \"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: this.state.trainee_lname,\n          onChange: this.onChangeTraineeLname,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, \"Email: \"), React.createElement(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          value: this.state.trainee_email,\n          onChange: this.onChangeTraineeEmail,\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, \" Bursary Start Date\"), React.createElement(\"div\", {\n          style: {\n            height: '50px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, React.createElement(DatePicker, {\n          selected: this.state.trainee_start_date,\n          selectsStart: true,\n          startDate: this.state.trainee_start_date,\n          endDate: this.state.trainee_end_date,\n          onChange: this.onChangeStartDate,\n          dateFormat: \"dd/MM/yyyy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        })), React.createElement(\"label\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, \" Bursary End Date \"), React.createElement(\"div\", {\n          style: {\n            height: '50px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(DatePicker, {\n          selected: this.state.trainee_end_date,\n          selectsEnd: true,\n          startDate: this.state.trainee_start_date,\n          endDate: this.state.trainee_end_date,\n          onChange: this.onChangeEndDate,\n          dateFormat: \"dd/MM/yyyy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 176\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"form-group\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"submit\",\n          value: \"Add Trainee\",\n          className: \"btn btn-primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }))));\n      }\n    }\n  }]);\n\n  return CreateTrainee;\n}(Component);\n\nexport { CreateTrainee as default };","map":{"version":3,"sources":["C:\\Users\\Chi Zhang\\Desktop\\QA Bursary project\\AWS-Bursary-Project-V1\\React\\src\\components\\create-trainee.component.js"],"names":["React","Component","axios","CryptoJS","codes","AccessDenied","authService","DatePicker","CreateTrainee","props","onChangeStartDate","startDate","setState","trainee_start_date","console","log","state","onChangeEndDate","endDate","trainee_end_date","onChangeTraineeFname","bind","onChangeTraineeLname","onChangeTraineeEmail","onChangeTraineePassword","onSubmit","trainee_fname","trainee_lname","trainee_email","trainee_password","currentUser","currentUserValue","e","target","value","preventDefault","alert","fname","AES","encrypt","trainee","lname","email","staff","iv","pass","Math","random","toString","slice","newTrainee","post","process","env","REACT_APP_AWS_IP","then","response","status","data","history","push","window","location","reload","token","role","marginLeft","marginRight","height"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport CryptoJS from \"react-native-crypto-js\";\r\nimport { codes } from \"../secrets/secrets.js\";\r\nimport AccessDenied from './modules/AccessDenied';\r\nimport { authService } from './modules/authService';\r\nimport DatePicker from 'react-datepicker';\r\nimport 'bootstrap/dist/css/bootstrap.css';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport '@y0c/react-datepicker/assets/styles/calendar.scss';\r\nimport '../css/add-trainee.css';\r\n\r\n\r\nexport default class CreateTrainee extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n        \r\n        this.onChangeTraineeFname = this.onChangeTraineeFname.bind(this);\r\n        this.onChangeTraineeLname = this.onChangeTraineeLname.bind(this);\r\n        this.onChangeTraineeEmail = this.onChangeTraineeEmail.bind(this);\r\n        this.onChangeTraineePassword = this.onChangeTraineePassword.bind(this);\r\n        this.onSubmit = this.onSubmit.bind(this);\r\n        this.onChangeStartDate = this.onChangeStartDate.bind(this);\r\n        this.onChangeEndDate = this.onChangeEndDate.bind(this);\r\n\r\n        this.state = {\r\n            trainee_fname: '',\r\n            trainee_lname: '',\r\n            trainee_email: '',\r\n            trainee_password: '',\r\n            trainee_start_date: '',\r\n            trainee_end_date: '',\r\n            currentUser: authService.currentUserValue\r\n        }\r\n    }\r\n    \r\n    onChangeTraineeFname(e) {\r\n        this.setState({\r\n            trainee_fname: e.target.value\r\n        });\r\n    }\r\n    \r\n    onChangeTraineeLname(e) {\r\n        this.setState({\r\n            trainee_lname: e.target.value\r\n        });\r\n    }\r\n\r\n\r\n    onChangeTraineeEmail(e) {\r\n        this.setState({\r\n            trainee_email: e.target.value\r\n        });\r\n    }\r\n    \r\n    onChangeTraineePassword(e) {\r\n        this.setState({\r\n            trainee_password: e.target.value\r\n        });\r\n    }\r\n\r\n    onChangeStartDate = (startDate) =>{\r\n        this.setState({\r\n            trainee_start_date: startDate\r\n        })\r\n\r\n        console.log(startDate);\r\n        console.log(this.state.trainee_start_date);\r\n    }\r\n\r\n    onChangeEndDate = (endDate) =>{\r\n        this.setState({\r\n            trainee_end_date: endDate\r\n        })\r\n        console.log(this.state.endDate);\r\n    }\r\n    \r\n    onSubmit(e) {\r\n        e.preventDefault();\r\n\r\n        if(this.state.trainee_start_date == '' || this.state.trainee_end_date == ''){\r\n            alert('Please select the bursary start/end dates');\r\n        }\r\n        else{\r\n            console.log(`Form submitted:`);\r\n            console.log(`Trainee Fname: ${this.state.trainee_fname}`);\r\n            console.log(`Trainee Lname: ${this.state.trainee_lname}`);\r\n            console.log(`Trainee Email: ${this.state.trainee_email}`);\r\n            \r\n            var fname = CryptoJS.AES.encrypt(this.state.trainee_fname, codes.trainee);\r\n            var lname = CryptoJS.AES.encrypt(this.state.trainee_lname, codes.trainee);\r\n            var email = CryptoJS.AES.encrypt(this.state.trainee_email, codes.staff, {iv: codes.iv});\r\n            var pass  = CryptoJS.AES.encrypt(Math.random().toString(36).slice(-8), codes.trainee);\r\n            var startDate = CryptoJS.AES.encrypt(this.state.trainee_start_date.toString(), codes.trainee);\r\n            var endDate = CryptoJS.AES.encrypt(this.state.trainee_end_date.toString(), codes.trainee);\r\n\r\n            var newTrainee = {\r\n                trainee_fname: fname.toString(),\r\n                trainee_lname: lname.toString(),\r\n                trainee_email: email.toString(),\r\n                trainee_password: pass.toString(),\r\n                trainee_start_date: startDate.toString(),\r\n                trainee_end_date: endDate.toString()\r\n            };\r\n            \r\n            console.log(newTrainee)\r\n            \r\n            axios.post('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/add', newTrainee)\r\n            .then( (response) => {if(response.status == 205){\r\n                                    alert(\"Email is already in use\");\r\n                                }\r\n                                else{\r\n                                    axios.post('http://'+process.env.REACT_APP_AWS_IP+':4000/trainee/send-email', {\r\n                                        trainee_email: email.toString()\r\n                                        })\r\n                                    .then( (response) => {console.log(response.data);\r\n\t\t\t\t\t\t\t\t\t                      this.props.history.push('/');\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t  window.location.reload();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t });\r\n                                }\r\n                    }   \r\n            );  \r\n        }      \r\n    }\r\n    \r\n   render() {\r\n\t   if(this.state.currentUser.token.role !== 'recruiter'){\r\n\t\t   return (\r\n\t\t   < AccessDenied />\r\n\t   );} else{\r\n        return (\r\n            <div className=\"createTrainee\" style={{marginLeft: 100, marginRight: 100}}>\r\n                <form className=\"addForm\" onSubmit={this.onSubmit}>\r\n                    <h3>Add Trainee</h3>\r\n                    <div className=\"form-group\"> \r\n                        <label>First Name: </label>\r\n                        <input  type=\"text\"\r\n                                className=\"form-control\"\r\n                                value={this.state.trainee_fname}\r\n                                onChange={this.onChangeTraineeFname}\r\n                                required/>\r\n                    </div>\r\n                    <div className=\"form-group\"> \r\n                        <label>Last Name: </label>\r\n                        <input  type=\"text\"\r\n                                className=\"form-control\"\r\n                                value={this.state.trainee_lname}\r\n                                onChange={this.onChangeTraineeLname}\r\n                                required/>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                        <label>Email: </label>\r\n                        <input \r\n                                type=\"text\" \r\n                                className=\"form-control\"\r\n                                value={this.state.trainee_email}\r\n                                onChange={this.onChangeTraineeEmail}\r\n                                required/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <label> Bursary Start Date</label>\r\n                        <div style={{height: '50px'}}>\r\n                            <DatePicker\r\n                                selected={this.state.trainee_start_date}\r\n                                selectsStart\r\n                                startDate={this.state.trainee_start_date}\r\n                                endDate={this.state.trainee_end_date}\r\n                                onChange={this.onChangeStartDate}\r\n                                dateFormat=\"dd/MM/yyyy\"\r\n                            />\r\n                        </div>\r\n                        <label> Bursary End Date </label>\r\n                        <div style={{height: '50px'}}>\r\n                            <DatePicker\r\n                                selected={this.state.trainee_end_date}\r\n                                selectsEnd\r\n                                startDate={this.state.trainee_start_date}\r\n                                endDate={this.state.trainee_end_date}\r\n                                onChange={this.onChangeEndDate}\r\n                                dateFormat=\"dd/MM/yyyy\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\">\r\n                        <input type=\"submit\" value=\"Add Trainee\" className=\"btn btn-primary\" />\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n   }\r\n}"]},"metadata":{},"sourceType":"module"}